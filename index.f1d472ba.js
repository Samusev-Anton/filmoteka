!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},t={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in l)return l[e].exports;if(e in t){var n=t[e];delete t[e];var a={id:e,exports:{}};return l[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},n.parcelRequired7c6=a);var i,o=a("l5bVx"),r=e(a("WMajR")).template({1:function(n,l,t,a,i){var r,s,c=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,d="function",m=n.escapeExpression,p=n.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li class="list-card__item film-card">\n<div class="film-card__thumb">\n'+(null!=(r=p(t,"if").call(c,null!=l?p(l,"poster_path"):l,{name:"if",hash:{},fn:n.program(2,i,0),inverse:n.program(4,i,0),data:i,loc:{start:{line:4,column:8},end:{line:10,column:15}}}))?r:"")+'</div>\n    <h2 class="film-card__title" data-id="'+m((void 0===(s=null!=(s=p(t,"id")||(null!=l?p(l,"id"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"id",hash:{},data:i,loc:{start:{line:12,column:42},end:{line:12,column:48}}}):s)+'">'+m((void 0===(s=null!=(s=p(t,"original_title")||(null!=l?p(l,"original_title"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"original_title",hash:{},data:i,loc:{start:{line:12,column:50},end:{line:12,column:68}}}):s)+'</h2>\n        <div class="film-card__description">\n        <ul>\n'+(null!=(r=p(t,"each").call(c,null!=l?p(l,"genres"):l,{name:"each",hash:{},fn:n.program(6,i,0),inverse:n.noop,data:i,loc:{start:{line:15,column:12},end:{line:17,column:21}}}))?r:"")+'        </ul>\n    <p class="film-card__year">'+m((void 0===(s=null!=(s=p(t,"year")||(null!=l?p(l,"year"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"year",hash:{},data:i,loc:{start:{line:19,column:31},end:{line:19,column:39}}}):s)+'</p>\n    <p class="film-card__rating visually-hidden">'+m((void 0===(s=null!=(s=p(t,"vote_average")||(null!=l?p(l,"vote_average"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"vote_average",hash:{},data:i,loc:{start:{line:20,column:49},end:{line:20,column:65}}}):s)+"</p>\n    </div>\n</li>\n"},2:function(n,l,t,a,i){var r,s=null!=l?l:n.nullContext||{},c=n.hooks.helperMissing,u="function",d=n.escapeExpression,m=n.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'        <img src="https://image.tmdb.org/t/p/w400'+d((void 0===(r=null!=(r=m(t,"poster_path")||(null!=l?m(l,"poster_path"):l))?r:c)?"undefined":e(o)(r))===u?r.call(s,{name:"poster_path",hash:{},data:i,loc:{start:{line:5,column:49},end:{line:5,column:64}}}):r)+'"\n            alt="'+d((void 0===(r=null!=(r=m(t,"original_title")||(null!=l?m(l,"original_title"):l))?r:c)?"undefined":e(o)(r))===u?r.call(s,{name:"original_title",hash:{},data:i,loc:{start:{line:6,column:17},end:{line:6,column:35}}}):r)+'" loading="lazy" data-id="'+d((void 0===(r=null!=(r=m(t,"id")||(null!=l?m(l,"id"):l))?r:c)?"undefined":e(o)(r))===u?r.call(s,{name:"id",hash:{},data:i,loc:{start:{line:6,column:61},end:{line:6,column:67}}}):r)+'" />\n'},4:function(e,n,l,t,a){return'        <img src="https://sd.keepcalms.com/i/keep-calm-poster-not-found.png"\n            alt="poster not found" class="lazyload" />\n'},6:function(e,n,l,t,a){var i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"            <li>"+e.escapeExpression(e.lambda(null!=n?i(n,"name"):n,n))+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,l,t,a){var i;return(null!=(i=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(l,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:23,column:9}}}))?i:"")+"\n"},useData:!0}),s=a("bpxeT"),c=a("2TvXO"),u="27a76f0869afd59eafccef7d6d986c20",d="https://api.themoviedb.org/3",m="".concat(d,"/trending/movie/week"),p="".concat(d,"/search/movie"),f="".concat(d,"/movie/"),v=a("4Nugj"),h=a("dDDEV");function _(n,l){return n.map((function(n){return e(h)({},n,{year:(i=n,i.release_date?i.release_date.split("-")[0]:""),genres:(t=n.genre_ids,a=l,t.map((function(e){return a.filter((function(n){return n.id===e}))})).slice(0,3).flat())});var t,a,i}))}function y(){return e(i).genres}i=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]}');var g=a("cWPZ2"),b="";v.refs.form.addEventListener("submit",(function(e){k.classList.remove("done"),e.preventDefault(),page=1,(b=e.target.elements.serch_film.value.trim().toLowerCase()).length<1||""===b?(v.refs.divError.classList.remove("visually-hidden"),v.refs.homeGallery.classList.add("visually-hidden"),v.refs.filterForm.classList.add("visually-hidden"),k.classList.add("done"),form.reset(),g.localStorageAPI.save("query-pg",b)):L(b).then((function(e){v.refs.divError.classList.add("visually-hidden"),v.refs.homeGallery.classList.remove("visually-hidden"),v.refs.filterForm.classList.remove("visually-hidden");var n=y(),l=_(e.results,n);v.refs.homeGallery.innerHTML=r(l),k.classList.add("done")}))}));var k=document.querySelector(".preloader");var x=0;function w(){return(w=e(s)(e(c).mark((function n(){var l,t;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m,"?api_key=").concat(u,"&page=").concat(1));case 3:return l=e.sent,e.next=6,l.json();case 6:return t=e.sent,x=t.total_pages,e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}function L(e){return O.apply(this,arguments)}function O(){return(O=e(s)(e(c).mark((function n(l){var t,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(p,"?api_key=").concat(u,"&query=").concat(l,"&language=en-US&page=1&include_adult=false&page=").concat(1));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,x=a.total_pages,console.log(x),e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}function E(e){return P.apply(this,arguments)}function P(){return(P=e(s)(e(c).mark((function n(l){var t,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/").concat(l,"?api_key=").concat(u,"&language=en-US"));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}v=a("4Nugj");(function(){return w.apply(this,arguments)})().then((function(e){var n=y(),l=_(e.results,n);console.log(l),v.refs.homeGallery.innerHTML=r(l)}));s=a("bpxeT"),c=a("2TvXO"),o=a("l5bVx");var T,D=e(a("WMajR")).template({1:function(e,n,l,t,a){var i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return e.escapeExpression(e.lambda(null!=n?i(n,"name"):n,n))+"\n          "},compiler:[8,">= 4.3.0"],main:function(n,l,t,a,i){var r,s,c=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,d="function",m=n.escapeExpression,p=n.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class='modal'>\n  <div class='modal__img'><img\n      class='modal__poster'\n      src='https://image.tmdb.org/t/p/w500"+m((void 0===(s=null!=(s=p(t,"poster_path")||(null!=l?p(l,"poster_path"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"poster_path",hash:{},data:i,loc:{start:{line:4,column:42},end:{line:4,column:57}}}):s)+"'\n      alt="+m((void 0===(s=null!=(s=p(t,"original_title")||(null!=l?p(l,"original_title"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"original_title",hash:{},data:i,loc:{start:{line:5,column:10},end:{line:5,column:28}}}):s)+"\n      loading='lazy'\n    /></div>\n  <div class='modal__content'><h2 class='modal__title'>"+m((void 0===(s=null!=(s=p(t,"original_title")||(null!=l?p(l,"original_title"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"original_title",hash:{},data:i,loc:{start:{line:8,column:55},end:{line:8,column:73}}}):s)+"</h2>\n    <div class='modal__info'>\n      <ul class='modal__list-key'>\n        <li class='modal__list-key-item'>Vote / Votes</li>\n        <li class='modal__list-value-item'><span\n            class='modal__list-vote'\n          >"+m((void 0===(s=null!=(s=p(t,"vote_average")||(null!=l?p(l,"vote_average"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"vote_average",hash:{},data:i,loc:{start:{line:14,column:11},end:{line:14,column:27}}}):s)+"</span>\n          /\n          <span class='modal__list-value-item'>"+m((void 0===(s=null!=(s=p(t,"vote_count")||(null!=l?p(l,"vote_count"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"vote_count",hash:{},data:i,loc:{start:{line:16,column:47},end:{line:16,column:61}}}):s)+"</span>\n        </li>\n      </ul>\n      <ul class='modal__list-key'>\n        <li class='modal__list-key-item'>Popularity</li>\n        <li class='modal__list-value-item'>"+m((void 0===(s=null!=(s=p(t,"popularity")||(null!=l?p(l,"popularity"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"popularity",hash:{},data:i,loc:{start:{line:21,column:43},end:{line:21,column:57}}}):s)+"</li>\n      </ul>\n      <ul class='modal__list-key'>\n        <li class='modal__list-key-item'>Original Title</li>\n        <li class='modal__list-value-item'>"+m((void 0===(s=null!=(s=p(t,"original_title")||(null!=l?p(l,"original_title"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"original_title",hash:{},data:i,loc:{start:{line:25,column:43},end:{line:25,column:61}}}):s)+"</li>\n      </ul>\n      <ul class='modal__list-key'>\n        <li class='modal__list-key-item'>Genre</li>\n        <li class='modal__list-value-item'>"+(null!=(r=p(t,"each").call(c,null!=l?p(l,"genres"):l,{name:"each",hash:{},fn:n.program(1,i,0),inverse:n.noop,data:i,loc:{start:{line:29,column:43},end:{line:30,column:19}}}))?r:"")+"</li>\n      </ul>\n\n    </div>\n    <p class='modal__about'>ABOUT</p>\n    <p class='modal__about-text'>"+m((void 0===(s=null!=(s=p(t,"overview")||(null!=l?p(l,"overview"):l))?s:u)?"undefined":e(o)(s))===d?s.call(c,{name:"overview",hash:{},data:i,loc:{start:{line:35,column:33},end:{line:35,column:45}}}):s)+"</p>\n    <div class='modal__buttons'>\n      <button class='modal__button--watched' type='submit'>ADD TO WATCHED</button>\n      <button class='modal__button--queue' type='submit'>ADD TO QUEUE</button></div>\n  </div>\n  <button type='button' class='modal__button-close'></button>\n</div>"},useData:!0});v=a("4Nugj"),g=a("cWPZ2"),document.querySelector(".list-card__item");function j(){return(j=e(s)(e(c).mark((function n(l){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.preventDefault(),"IMG"===l.target.nodeName||"H2"===l.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:E(l.target.dataset.id).then((function(e){T=e,v.refs.filmBox.innerHTML=D(e),M()}));case 5:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function M(){var e=document.querySelector(".modal__button-close");document.body.addEventListener("keydown",N),document.body.classList.add("modal-open"),v.refs.filmBox.classList.remove("visually-hidden"),document.body.addEventListener("click",A),e.addEventListener("click",q)}function q(){document.body.classList.remove("modal-open"),v.refs.filmBox.classList.add("visually-hidden"),document.body.removeEventListener("click",A),document.body.removeEventListener("keydown",N)}function A(e){"modal__button--watched"===e.target.className&&g.localStorageAPI.pushWatched("watched",T),"modal__button--queue"===e.target.className&&g.localStorageAPI.pushQueue("queue",T),e.target===v.refs.filmBox&&q()}function N(e){"Escape"===e.code&&q()}v.refs.homeGallery.addEventListener("click",(function(e){return j.apply(this,arguments)})),a("2Z7mb"),a("ivF4K"),a("cWPZ2")}();
//# sourceMappingURL=index.f1d472ba.js.map
